{"ast":null,"code":"var _jsxFileName = \"E:\\\\L\\xE0m tiktok\\\\google-places-api-demo-type\\\\src\\\\components\\\\MapWithImageOverlay.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { YOUR_API_KEY } from \"../constants/constants\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst MapWithImageOverlay = () => {\n  _s();\n  const [map, setMap] = useState(null);\n  const [mapData, setMapData] = useState({\n    center: {\n      lat: 10.853,\n      lng: 106.64\n    },\n    // Vị trí mặc định (Hà Nội)\n    zoom: 13,\n    markers: [],\n    overlayImage: null // Ảnh bản đồ\n  });\n\n  const mapRef = useRef(null);\n  const handleOverlayImageChange = event => {\n    const file = event.target.files[0];\n    const reader = new FileReader();\n    reader.onload = e => {\n      setMapData(prevState => ({\n        ...prevState,\n        overlayImage: e.target.result\n      }));\n    };\n    reader.readAsDataURL(file);\n  };\n  useEffect(() => {\n    const loadMap = () => {\n      if (!window.google || !window.google.maps) {\n        console.error('Google Maps API is not loaded.');\n        return;\n      }\n      const googleMap = new google.maps.Map(mapRef.current, {\n        center: mapData.center,\n        zoom: mapData.zoom\n      });\n      setMap(googleMap);\n    };\n\n    // Tải Google Maps API script\n    const script = document.createElement('script');\n    script.src = `https://maps.googleapis.com/maps/api/js?key=${YOUR_API_KEY}&libraries=places&callback=${loadMap}`;\n    script.async = true;\n    document.body.appendChild(script);\n  }, []);\n  useEffect(() => {\n    if (map) {\n      // Thêm markers\n      mapData.markers.forEach(marker => {\n        new google.maps.Marker({\n          position: marker.position,\n          map: map\n        });\n      });\n\n      // Thêm overlay image\n      if (mapData.overlayImage) {\n        const overlay = new google.maps.ImageOverlay(mapData.overlayImage, {\n          bounds: map.getBounds(),\n          opacity: 0.5\n        });\n        map.overlayLayer.addOverlay(overlay);\n      }\n    }\n  }, [map, mapData.markers, mapData.overlayImage]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"file\",\n      onChange: handleOverlayImageChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: mapRef,\n      style: {\n        width: '600px',\n        height: '400px'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 5\n  }, this);\n};\n_s(MapWithImageOverlay, \"g/ex3IL1ut0hDUYUZmCeoVtnzg8=\");\n_c = MapWithImageOverlay;\nexport default MapWithImageOverlay;\nvar _c;\n$RefreshReg$(_c, \"MapWithImageOverlay\");","map":{"version":3,"names":["React","useState","useEffect","useRef","YOUR_API_KEY","MapWithImageOverlay","map","setMap","mapData","setMapData","center","lat","lng","zoom","markers","overlayImage","mapRef","handleOverlayImageChange","event","file","target","files","reader","FileReader","onload","e","prevState","result","readAsDataURL","loadMap","window","google","maps","console","error","googleMap","Map","current","script","document","createElement","src","async","body","appendChild","forEach","marker","Marker","position","overlay","ImageOverlay","bounds","getBounds","opacity","overlayLayer","addOverlay","width","height"],"sources":["E:/Làm tiktok/google-places-api-demo-type/src/components/MapWithImageOverlay.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { YOUR_API_KEY } from \"../constants/constants\";\r\n\r\nconst MapWithImageOverlay = () => {\r\n  const [map, setMap] = useState(null);\r\n  const [mapData, setMapData] = useState({\r\n    center: { lat: 10.853, lng: 106.64 }, // Vị trí mặc định (Hà Nội)\r\n    zoom: 13,\r\n    markers: [],\r\n    overlayImage: null, // Ảnh bản đồ\r\n  });\r\n  const mapRef = useRef(null);\r\n\r\n  const handleOverlayImageChange = (event) => {\r\n    const file = event.target.files[0];\r\n    const reader = new FileReader();\r\n    reader.onload = (e) => {\r\n      setMapData((prevState) => ({\r\n        ...prevState,\r\n        overlayImage: e.target.result,\r\n      }));\r\n    };\r\n    reader.readAsDataURL(file);\r\n  };\r\n\r\n  useEffect(() => {\r\n    const loadMap = () => {\r\n      if (!window.google || !window.google.maps) {\r\n        console.error('Google Maps API is not loaded.');\r\n        return;\r\n      }\r\n\r\n      const googleMap = new google.maps.Map(mapRef.current, {\r\n        center: mapData.center,\r\n        zoom: mapData.zoom,\r\n      });\r\n      setMap(googleMap);\r\n    };\r\n\r\n    // Tải Google Maps API script\r\n    const script = document.createElement('script');\r\n    script.src = `https://maps.googleapis.com/maps/api/js?key=${YOUR_API_KEY}&libraries=places&callback=${loadMap}`;\r\n    script.async = true;\r\n    document.body.appendChild(script);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (map) {\r\n      // Thêm markers\r\n      mapData.markers.forEach((marker) => {\r\n        new google.maps.Marker({\r\n          position: marker.position,\r\n          map: map,\r\n        });\r\n      });\r\n\r\n      // Thêm overlay image\r\n      if (mapData.overlayImage) {\r\n        const overlay = new google.maps.ImageOverlay(mapData.overlayImage, {\r\n          bounds: map.getBounds(),\r\n          opacity: 0.5,\r\n        });\r\n        map.overlayLayer.addOverlay(overlay);\r\n      }\r\n    }\r\n  }, [map, mapData.markers, mapData.overlayImage]);\r\n\r\n  return (\r\n    <div>\r\n      <input type=\"file\" onChange={handleOverlayImageChange} />\r\n      <div ref={mapRef} style={{ width: '600px', height: '400px' }} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MapWithImageOverlay;"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,EAAEC,MAAM,QAAQ,OAAO;AAC1D,SAASC,YAAY,QAAQ,wBAAwB;AAAC;AAEtD,MAAMC,mBAAmB,GAAG,MAAM;EAAA;EAChC,MAAM,CAACC,GAAG,EAAEC,MAAM,CAAC,GAAGN,QAAQ,CAAC,IAAI,CAAC;EACpC,MAAM,CAACO,OAAO,EAAEC,UAAU,CAAC,GAAGR,QAAQ,CAAC;IACrCS,MAAM,EAAE;MAAEC,GAAG,EAAE,MAAM;MAAEC,GAAG,EAAE;IAAO,CAAC;IAAE;IACtCC,IAAI,EAAE,EAAE;IACRC,OAAO,EAAE,EAAE;IACXC,YAAY,EAAE,IAAI,CAAE;EACtB,CAAC,CAAC;;EACF,MAAMC,MAAM,GAAGb,MAAM,CAAC,IAAI,CAAC;EAE3B,MAAMc,wBAAwB,GAAIC,KAAK,IAAK;IAC1C,MAAMC,IAAI,GAAGD,KAAK,CAACE,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC;IAClC,MAAMC,MAAM,GAAG,IAAIC,UAAU,EAAE;IAC/BD,MAAM,CAACE,MAAM,GAAIC,CAAC,IAAK;MACrBhB,UAAU,CAAEiB,SAAS,KAAM;QACzB,GAAGA,SAAS;QACZX,YAAY,EAAEU,CAAC,CAACL,MAAM,CAACO;MACzB,CAAC,CAAC,CAAC;IACL,CAAC;IACDL,MAAM,CAACM,aAAa,CAACT,IAAI,CAAC;EAC5B,CAAC;EAEDjB,SAAS,CAAC,MAAM;IACd,MAAM2B,OAAO,GAAG,MAAM;MACpB,IAAI,CAACC,MAAM,CAACC,MAAM,IAAI,CAACD,MAAM,CAACC,MAAM,CAACC,IAAI,EAAE;QACzCC,OAAO,CAACC,KAAK,CAAC,gCAAgC,CAAC;QAC/C;MACF;MAEA,MAAMC,SAAS,GAAG,IAAIJ,MAAM,CAACC,IAAI,CAACI,GAAG,CAACpB,MAAM,CAACqB,OAAO,EAAE;QACpD3B,MAAM,EAAEF,OAAO,CAACE,MAAM;QACtBG,IAAI,EAAEL,OAAO,CAACK;MAChB,CAAC,CAAC;MACFN,MAAM,CAAC4B,SAAS,CAAC;IACnB,CAAC;;IAED;IACA,MAAMG,MAAM,GAAGC,QAAQ,CAACC,aAAa,CAAC,QAAQ,CAAC;IAC/CF,MAAM,CAACG,GAAG,GAAI,+CAA8CrC,YAAa,8BAA6ByB,OAAQ,EAAC;IAC/GS,MAAM,CAACI,KAAK,GAAG,IAAI;IACnBH,QAAQ,CAACI,IAAI,CAACC,WAAW,CAACN,MAAM,CAAC;EACnC,CAAC,EAAE,EAAE,CAAC;EAENpC,SAAS,CAAC,MAAM;IACd,IAAII,GAAG,EAAE;MACP;MACAE,OAAO,CAACM,OAAO,CAAC+B,OAAO,CAAEC,MAAM,IAAK;QAClC,IAAIf,MAAM,CAACC,IAAI,CAACe,MAAM,CAAC;UACrBC,QAAQ,EAAEF,MAAM,CAACE,QAAQ;UACzB1C,GAAG,EAAEA;QACP,CAAC,CAAC;MACJ,CAAC,CAAC;;MAEF;MACA,IAAIE,OAAO,CAACO,YAAY,EAAE;QACxB,MAAMkC,OAAO,GAAG,IAAIlB,MAAM,CAACC,IAAI,CAACkB,YAAY,CAAC1C,OAAO,CAACO,YAAY,EAAE;UACjEoC,MAAM,EAAE7C,GAAG,CAAC8C,SAAS,EAAE;UACvBC,OAAO,EAAE;QACX,CAAC,CAAC;QACF/C,GAAG,CAACgD,YAAY,CAACC,UAAU,CAACN,OAAO,CAAC;MACtC;IACF;EACF,CAAC,EAAE,CAAC3C,GAAG,EAAEE,OAAO,CAACM,OAAO,EAAEN,OAAO,CAACO,YAAY,CAAC,CAAC;EAEhD,oBACE;IAAA,wBACE;MAAO,IAAI,EAAC,MAAM;MAAC,QAAQ,EAAEE;IAAyB;MAAA;MAAA;MAAA;IAAA,QAAG,eACzD;MAAK,GAAG,EAAED,MAAO;MAAC,KAAK,EAAE;QAAEwC,KAAK,EAAE,OAAO;QAAEC,MAAM,EAAE;MAAQ;IAAE;MAAA;MAAA;MAAA;IAAA,QAAG;EAAA;IAAA;IAAA;IAAA;EAAA,QAC5D;AAEV,CAAC;AAAC,GAtEIpD,mBAAmB;AAAA,KAAnBA,mBAAmB;AAwEzB,eAAeA,mBAAmB;AAAC;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}