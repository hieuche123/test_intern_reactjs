{"ast":null,"code":"var _jsxFileName = \"E:\\\\L\\xE0m tiktok\\\\google-places-api-demo-type\\\\src\\\\components\\\\Map.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { MapContainer, TileLayer, useMap } from 'react-leaflet';\nimport { Document, Page } from 'react-pdf';\nimport 'leaflet/dist/leaflet.css';\nimport './Map.css';\n\n// Cấu hình đường dẫn worker cho react-pdf\nimport { pdfjs } from 'react-pdf';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\npdfjs.GlobalWorkerOptions.workerSrc = `//cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfjs.version}/pdf.worker.min.js`;\nfunction PDFOverlay(_ref) {\n  _s();\n  let {\n    pdfFile,\n    opacity,\n    scale,\n    position,\n    onPositionChange,\n    onScaleChange\n  } = _ref;\n  const map = useMap();\n  const containerRef = useRef();\n  const pdfRef = useRef();\n  const [dragging, setDragging] = useState(false);\n  const [startPosition, setStartPosition] = useState({\n    x: 0,\n    y: 0\n  });\n  useEffect(() => {\n    const onZoomEnd = () => {\n      onScaleChange(map.getZoom());\n    };\n    map.on('zoomend', onZoomEnd);\n    return () => {\n      map.off('zoomend', onZoomEnd);\n    };\n  }, [map, onScaleChange]);\n  const onMouseDown = e => {\n    setStartPosition({\n      x: e.clientX - position.x,\n      y: e.clientY - position.y\n    });\n    setDragging(true);\n  };\n  const onMouseMove = e => {\n    if (dragging) {\n      onPositionChange({\n        x: e.clientX - startPosition.x,\n        y: e.clientY - startPosition.y\n      });\n    }\n  };\n  const onMouseUp = () => {\n    setDragging(false);\n  };\n  useEffect(() => {\n    if (dragging) {\n      window.addEventListener('mousemove', onMouseMove);\n      window.addEventListener('mouseup', onMouseUp);\n    } else {\n      window.removeEventListener('mousemove', onMouseMove);\n      window.removeEventListener('mouseup', onMouseUp);\n    }\n    return () => {\n      window.removeEventListener('mousemove', onMouseMove);\n      window.removeEventListener('mouseup', onMouseUp);\n    };\n  }, [dragging]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: containerRef,\n    style: {\n      position: 'absolute',\n      left: position.x,\n      top: position.y,\n      opacity,\n      transform: `scale(${scale})`,\n      transformOrigin: 'top left',\n      cursor: dragging ? 'grabbing' : 'grab'\n    },\n    onMouseDown: onMouseDown,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: pdfRef,\n      style: {\n        width: '100%',\n        height: '100%'\n      },\n      children: /*#__PURE__*/_jsxDEV(Document, {\n        file: pdfFile,\n        children: /*#__PURE__*/_jsxDEV(Page, {\n          pageNumber: 1\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 5\n  }, this);\n}\n_s(PDFOverlay, \"C1vkp/KelX3BT/u6di7fH7+WTrE=\", false, function () {\n  return [useMap];\n});\n_c = PDFOverlay;\nfunction Map() {\n  _s2();\n  const [pdfFile, setPdfFile] = useState(null);\n  const [opacity, setOpacity] = useState(0.5);\n  const [scale, setScale] = useState(1);\n  const [position, setPosition] = useState({\n    x: 0,\n    y: 0\n  });\n  const handleFileUpload = e => {\n    const file = e.target.files[0];\n    if (file && file.type === \"application/pdf\") {\n      const reader = new FileReader();\n      reader.onload = () => {\n        setPdfFile(reader.result);\n      };\n      reader.readAsDataURL(file);\n    } else {\n      alert(\"Vui lòng tải lên tệp PDF.\");\n    }\n  };\n  const handleOpacityChange = e => {\n    setOpacity(parseFloat(e.target.value));\n  };\n  const handleScaleChange = zoomLevel => {\n    setScale(Math.pow(2, zoomLevel - 13));\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"file\",\n      accept: \"application/pdf\",\n      onChange: handleFileUpload\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"range\",\n      min: \"0\",\n      max: \"1\",\n      step: \"0.01\",\n      value: opacity,\n      onChange: handleOpacityChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(MapContainer, {\n      center: [21.028511, 105.804817],\n      zoom: 13,\n      style: {\n        height: '100vh',\n        width: '100%'\n      },\n      children: [/*#__PURE__*/_jsxDEV(TileLayer, {\n        url: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",\n        attribution: \"\\xA9 <a href=\\\"https://www.openstreetmap.org/copyright\\\">OpenStreetMap</a> contributors\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 9\n      }, this), pdfFile && /*#__PURE__*/_jsxDEV(PDFOverlay, {\n        pdfFile: pdfFile,\n        opacity: opacity,\n        scale: scale,\n        position: position,\n        onPositionChange: setPosition,\n        onScaleChange: handleScaleChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 108,\n    columnNumber: 5\n  }, this);\n}\n_s2(Map, \"hh2+QO2q3OPk9pc93uB6F4CEMHU=\");\n_c2 = Map;\nexport default Map;\nvar _c, _c2;\n$RefreshReg$(_c, \"PDFOverlay\");\n$RefreshReg$(_c2, \"Map\");","map":{"version":3,"names":["React","useState","useEffect","useRef","MapContainer","TileLayer","useMap","Document","Page","pdfjs","GlobalWorkerOptions","workerSrc","version","PDFOverlay","pdfFile","opacity","scale","position","onPositionChange","onScaleChange","map","containerRef","pdfRef","dragging","setDragging","startPosition","setStartPosition","x","y","onZoomEnd","getZoom","on","off","onMouseDown","e","clientX","clientY","onMouseMove","onMouseUp","window","addEventListener","removeEventListener","left","top","transform","transformOrigin","cursor","width","height","Map","setPdfFile","setOpacity","setScale","setPosition","handleFileUpload","file","target","files","type","reader","FileReader","onload","result","readAsDataURL","alert","handleOpacityChange","parseFloat","value","handleScaleChange","zoomLevel","Math","pow"],"sources":["E:/Làm tiktok/google-places-api-demo-type/src/components/Map.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { MapContainer, TileLayer, useMap } from 'react-leaflet';\r\nimport { Document, Page } from 'react-pdf';\r\nimport 'leaflet/dist/leaflet.css';\r\nimport './Map.css';\r\n\r\n// Cấu hình đường dẫn worker cho react-pdf\r\nimport { pdfjs } from 'react-pdf';\r\npdfjs.GlobalWorkerOptions.workerSrc = `//cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfjs.version}/pdf.worker.min.js`;\r\n\r\nfunction PDFOverlay({ pdfFile, opacity, scale, position, onPositionChange, onScaleChange }) {\r\n  const map = useMap();\r\n  const containerRef = useRef();\r\n  const pdfRef = useRef();\r\n  const [dragging, setDragging] = useState(false);\r\n  const [startPosition, setStartPosition] = useState({ x: 0, y: 0 });\r\n\r\n  useEffect(() => {\r\n    const onZoomEnd = () => {\r\n      onScaleChange(map.getZoom());\r\n    };\r\n    map.on('zoomend', onZoomEnd);\r\n    return () => {\r\n      map.off('zoomend', onZoomEnd);\r\n    };\r\n  }, [map, onScaleChange]);\r\n\r\n  const onMouseDown = (e) => {\r\n    setStartPosition({ x: e.clientX - position.x, y: e.clientY - position.y });\r\n    setDragging(true);\r\n  };\r\n\r\n  const onMouseMove = (e) => {\r\n    if (dragging) {\r\n      onPositionChange({ x: e.clientX - startPosition.x, y: e.clientY - startPosition.y });\r\n    }\r\n  };\r\n\r\n  const onMouseUp = () => {\r\n    setDragging(false);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (dragging) {\r\n      window.addEventListener('mousemove', onMouseMove);\r\n      window.addEventListener('mouseup', onMouseUp);\r\n    } else {\r\n      window.removeEventListener('mousemove', onMouseMove);\r\n      window.removeEventListener('mouseup', onMouseUp);\r\n    }\r\n    return () => {\r\n      window.removeEventListener('mousemove', onMouseMove);\r\n      window.removeEventListener('mouseup', onMouseUp);\r\n    };\r\n  }, [dragging]);\r\n\r\n  return (\r\n    <div\r\n      ref={containerRef}\r\n      style={{\r\n        position: 'absolute',\r\n        left: position.x,\r\n        top: position.y,\r\n        opacity,\r\n        transform: `scale(${scale})`,\r\n        transformOrigin: 'top left',\r\n        cursor: dragging ? 'grabbing' : 'grab'\r\n      }}\r\n      onMouseDown={onMouseDown}\r\n    >\r\n      <div ref={pdfRef} style={{ width: '100%', height: '100%' }}>\r\n        <Document file={pdfFile}>\r\n          <Page pageNumber={1} />\r\n        </Document>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction Map() {\r\n  const [pdfFile, setPdfFile] = useState(null);\r\n  const [opacity, setOpacity] = useState(0.5);\r\n  const [scale, setScale] = useState(1);\r\n  const [position, setPosition] = useState({ x: 0, y: 0 });\r\n\r\n  const handleFileUpload = (e) => {\r\n    const file = e.target.files[0];\r\n    if (file && file.type === \"application/pdf\") {\r\n      const reader = new FileReader();\r\n      reader.onload = () => {\r\n        setPdfFile(reader.result);\r\n      };\r\n      reader.readAsDataURL(file);\r\n    } else {\r\n      alert(\"Vui lòng tải lên tệp PDF.\");\r\n    }\r\n  };\r\n\r\n  const handleOpacityChange = (e) => {\r\n    setOpacity(parseFloat(e.target.value));\r\n  };\r\n\r\n  const handleScaleChange = (zoomLevel) => {\r\n    setScale(Math.pow(2, zoomLevel - 13));\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <input type=\"file\" accept=\"application/pdf\" onChange={handleFileUpload} />\r\n      <input\r\n        type=\"range\"\r\n        min=\"0\"\r\n        max=\"1\"\r\n        step=\"0.01\"\r\n        value={opacity}\r\n        onChange={handleOpacityChange}\r\n      />\r\n      <MapContainer\r\n        center={[21.028511, 105.804817]}\r\n        zoom={13}\r\n        style={{ height: '100vh', width: '100%' }}\r\n      >\r\n        <TileLayer\r\n          url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n          attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\r\n        />\r\n        {pdfFile && (\r\n          <PDFOverlay\r\n            pdfFile={pdfFile}\r\n            opacity={opacity}\r\n            scale={scale}\r\n            position={position}\r\n            onPositionChange={setPosition}\r\n            onScaleChange={handleScaleChange}\r\n          />\r\n        )}\r\n      </MapContainer>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Map;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}