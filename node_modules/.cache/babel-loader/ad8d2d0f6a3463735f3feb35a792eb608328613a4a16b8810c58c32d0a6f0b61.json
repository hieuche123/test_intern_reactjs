{"ast":null,"code":"var _jsxFileName = \"E:\\\\L\\xE0m tiktok\\\\google-places-api-demo-type\\\\src\\\\components\\\\Map.js\",\n  _s = $RefreshSig$();\nimport React, { useRef, useState, useEffect } from 'react';\nimport { GoogleMap, LoadScript, OverlayView } from '@react-google-maps/api';\nimport Draggable from 'react-draggable';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst containerStyle = {\n  width: '100%',\n  height: '600px'\n};\nconst center = {\n  lat: 10.8231,\n  lng: 106.6297\n};\nfunction MapComponent() {\n  _s();\n  const mapRef = useRef(null);\n  const [image, setImage] = useState(null);\n  const [opacity, setOpacity] = useState(1);\n  const [scale, setScale] = useState(1);\n  const [position, setPosition] = useState({\n    x: 0,\n    y: 0\n  });\n  const [latLng, setLatLng] = useState({\n    lat: center.lat,\n    lng: center.lng\n  });\n  const [size, setSize] = useState({\n    width: 0,\n    height: 0\n  });\n  const handleFileChange = e => {\n    const file = e.target.files[0];\n    const reader = new FileReader();\n    reader.onload = event => {\n      const img = new Image();\n      img.onload = () => {\n        setSize({\n          width: img.width,\n          height: img.height\n        });\n      };\n      img.src = event.target.result;\n      setImage(event.target.result);\n    };\n    reader.readAsDataURL(file);\n  };\n  const handleDrag = (e, data) => {\n    setPosition({\n      x: data.x,\n      y: data.y\n    });\n    if (mapRef.current) {\n      const projection = mapRef.current.getProjection();\n      if (projection) {\n        const worldCoordinateCenter = projection.fromLatLngToPoint(center);\n        const pixelOffset = new window.google.maps.Point(data.x / scale + worldCoordinateCenter.x, data.y / scale + worldCoordinateCenter.y);\n        const newLatLng = projection.fromPointToLatLng(pixelOffset);\n        setLatLng({\n          lat: newLatLng.lat(),\n          lng: newLatLng.lng()\n        });\n      }\n    }\n  };\n  const handleLoad = map => {\n    mapRef.current = map;\n  };\n  const handleScaleChange = e => {\n    const newScale = parseFloat(e.target.value);\n    setScale(newScale);\n    if (mapRef.current) {\n      const projection = mapRef.current.getProjection();\n      if (projection) {\n        const worldCoordinateCenter = projection.fromLatLngToPoint(center);\n        const pixelOffset = new window.google.maps.Point(position.x / newScale + worldCoordinateCenter.x, position.y / newScale + worldCoordinateCenter.y);\n        const newLatLng = projection.fromPointToLatLng(pixelOffset);\n        setLatLng({\n          lat: newLatLng.lat(),\n          lng: newLatLng.lng()\n        });\n\n        // Update image size when scale changes\n        setSize({\n          width: size.width / newScale,\n          height: size.height / newScale\n        });\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"file\",\n      accept: \"image/*\",\n      onChange: handleFileChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"range\",\n      min: \"0\",\n      max: \"1\",\n      step: \"0.01\",\n      value: opacity,\n      onChange: e => setOpacity(e.target.value)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"Opacity: \", opacity]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"range\",\n      min: \"0.1\",\n      max: \"2\",\n      step: \"0.01\",\n      value: scale,\n      onChange: handleScaleChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"Scale: \", scale]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"Position: (\", position.x, \", \", position.y, \") | Size: (\", size.width, \"px, \", size.height, \"px)\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"Coordinates: (\", latLng.lat, \", \", latLng.lng, \")\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(LoadScript, {\n      googleMapsApiKey: \"AIzaSyA3bsDl1xddiU_w38hA-fsGea8kWsp5uJM\",\n      children: /*#__PURE__*/_jsxDEV(GoogleMap, {\n        mapContainerStyle: containerStyle,\n        center: center,\n        zoom: 10,\n        onLoad: handleLoad,\n        children: image && /*#__PURE__*/_jsxDEV(Draggable, {\n          onDrag: handleDrag,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              position: 'absolute',\n              top: position.y,\n              left: position.x,\n              opacity: opacity,\n              transform: `scale(${scale})`,\n              transformOrigin: 'top left',\n              zIndex: 1000\n            },\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: image,\n              alt: \"overlay\",\n              style: {\n                width: size.width,\n                height: size.height\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 126,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 5\n  }, this);\n}\n_s(MapComponent, \"GEIMcMa4l9h6JBdTmniDvIj4V5c=\");\n_c = MapComponent;\nexport default MapComponent;\nvar _c;\n$RefreshReg$(_c, \"MapComponent\");","map":{"version":3,"names":["React","useRef","useState","useEffect","GoogleMap","LoadScript","OverlayView","Draggable","containerStyle","width","height","center","lat","lng","MapComponent","mapRef","image","setImage","opacity","setOpacity","scale","setScale","position","setPosition","x","y","latLng","setLatLng","size","setSize","handleFileChange","e","file","target","files","reader","FileReader","onload","event","img","Image","src","result","readAsDataURL","handleDrag","data","current","projection","getProjection","worldCoordinateCenter","fromLatLngToPoint","pixelOffset","window","google","maps","Point","newLatLng","fromPointToLatLng","handleLoad","map","handleScaleChange","newScale","parseFloat","value","top","left","transform","transformOrigin","zIndex"],"sources":["E:/LÃ m tiktok/google-places-api-demo-type/src/components/Map.js"],"sourcesContent":["import React, { useRef, useState, useEffect } from 'react';\r\nimport { GoogleMap, LoadScript, OverlayView } from '@react-google-maps/api';\r\nimport Draggable from 'react-draggable';\r\n\r\nconst containerStyle = {\r\n  width: '100%',\r\n  height: '600px'\r\n};\r\n\r\nconst center = {\r\n  lat: 10.8231,\r\n  lng: 106.6297\r\n};\r\n\r\nfunction MapComponent() {\r\n  const mapRef = useRef(null);\r\n  const [image, setImage] = useState(null);\r\n  const [opacity, setOpacity] = useState(1);\r\n  const [scale, setScale] = useState(1);\r\n  const [position, setPosition] = useState({ x: 0, y: 0 });\r\n  const [latLng, setLatLng] = useState({ lat: center.lat, lng: center.lng });\r\n  const [size, setSize] = useState({ width: 0, height: 0 });\r\n\r\n  const handleFileChange = (e) => {\r\n    const file = e.target.files[0];\r\n    const reader = new FileReader();\r\n    reader.onload = (event) => {\r\n      const img = new Image();\r\n      img.onload = () => {\r\n        setSize({ width: img.width, height: img.height });\r\n      };\r\n      img.src = event.target.result;\r\n      setImage(event.target.result);\r\n    };\r\n    reader.readAsDataURL(file);\r\n  };\r\n\r\n  const handleDrag = (e, data) => {\r\n    setPosition({ x: data.x, y: data.y });\r\n    if (mapRef.current) {\r\n      const projection = mapRef.current.getProjection();\r\n      if (projection) {\r\n        const worldCoordinateCenter = projection.fromLatLngToPoint(center);\r\n        const pixelOffset = new window.google.maps.Point(\r\n          (data.x / scale) + worldCoordinateCenter.x,\r\n          (data.y / scale) + worldCoordinateCenter.y\r\n        );\r\n        const newLatLng = projection.fromPointToLatLng(pixelOffset);\r\n        setLatLng({ lat: newLatLng.lat(), lng: newLatLng.lng() });\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleLoad = (map) => {\r\n    mapRef.current = map;\r\n  };\r\n\r\n  const handleScaleChange = (e) => {\r\n    const newScale = parseFloat(e.target.value);\r\n    setScale(newScale);\r\n    if (mapRef.current) {\r\n      const projection = mapRef.current.getProjection();\r\n      if (projection) {\r\n        const worldCoordinateCenter = projection.fromLatLngToPoint(center);\r\n        const pixelOffset = new window.google.maps.Point(\r\n          (position.x / newScale) + worldCoordinateCenter.x,\r\n          (position.y / newScale) + worldCoordinateCenter.y\r\n        );\r\n        const newLatLng = projection.fromPointToLatLng(pixelOffset);\r\n        setLatLng({ lat: newLatLng.lat(), lng: newLatLng.lng() });\r\n\r\n        // Update image size when scale changes\r\n        setSize({ width: size.width / newScale, height: size.height / newScale });\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <input type=\"file\" accept=\"image/*\" onChange={handleFileChange} />\r\n      <br />\r\n      <input\r\n        type=\"range\"\r\n        min=\"0\"\r\n        max=\"1\"\r\n        step=\"0.01\"\r\n        value={opacity}\r\n        onChange={(e) => setOpacity(e.target.value)}\r\n      />\r\n      <p>Opacity: {opacity}</p>\r\n      <input\r\n        type=\"range\"\r\n        min=\"0.1\"\r\n        max=\"2\"\r\n        step=\"0.01\"\r\n        value={scale}\r\n        onChange={handleScaleChange}\r\n      />\r\n      <p>Scale: {scale}</p>\r\n      <p>\r\n        Position: ({position.x}, {position.y}) | Size: ({size.width}px, {size.height}px)\r\n      </p>\r\n      <p>\r\n        Coordinates: ({latLng.lat}, {latLng.lng})\r\n      </p>\r\n      <LoadScript googleMapsApiKey=\"AIzaSyA3bsDl1xddiU_w38hA-fsGea8kWsp5uJM\">\r\n        <GoogleMap\r\n          mapContainerStyle={containerStyle}\r\n          center={center}\r\n          zoom={10}\r\n          onLoad={handleLoad}\r\n        >\r\n          {image && (\r\n            <Draggable onDrag={handleDrag}>\r\n              <div\r\n                style={{\r\n                  position: 'absolute',\r\n                  top: position.y,\r\n                  left: position.x,\r\n                  opacity: opacity,\r\n                  transform: `scale(${scale})`,\r\n                  transformOrigin: 'top left',\r\n                  zIndex: 1000\r\n                }}\r\n              >\r\n                <img src={image} alt=\"overlay\" style={{ width: size.width, height: size.height }} />\r\n              </div>\r\n            </Draggable>\r\n          )}\r\n        </GoogleMap>\r\n      </LoadScript>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default MapComponent;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}