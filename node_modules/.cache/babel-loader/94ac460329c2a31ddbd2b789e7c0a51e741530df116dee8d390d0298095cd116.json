{"ast":null,"code":"var _jsxFileName = \"E:\\\\L\\xE0m tiktok\\\\google-places-api-demo-type\\\\src\\\\components\\\\Map.js\",\n  _s = $RefreshSig$();\nimport React, { useRef, useState } from 'react';\nimport { GoogleMap, LoadScript } from '@react-google-maps/api';\nimport Draggable from 'react-draggable';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst containerStyle = {\n  width: '100%',\n  height: '600px'\n};\nconst defaultCenter = {\n  lat: 10.8231,\n  lng: 106.6297\n};\nfunction MapComponent() {\n  _s();\n  const mapRef = useRef(null);\n  const [image, setImage] = useState(null);\n  const [opacity, setOpacity] = useState(1);\n  const [scale, setScale] = useState(1);\n  const [position, setPosition] = useState({\n    x: 0,\n    y: 0\n  });\n  const [imageLatLng, setImageLatLng] = useState(defaultCenter);\n  const [imageSize, setImageSize] = useState({\n    width: 0,\n    height: 0\n  });\n  const handleFileChange = e => {\n    const file = e.target.files[0];\n    const reader = new FileReader();\n    reader.onload = event => {\n      const img = new Image();\n      img.onload = () => {\n        setImageSize({\n          width: img.width,\n          height: img.height\n        });\n      };\n      img.src = event.target.result;\n      setImage(event.target.result);\n    };\n    reader.readAsDataURL(file);\n  };\n  const handleDrag = (e, data) => {\n    setPosition({\n      x: data.x,\n      y: data.y\n    });\n  };\n  const handleLoad = map => {\n    mapRef.current = map;\n  };\n  const handleScaleChange = e => {\n    const newScale = parseFloat(e.target.value);\n    setScale(newScale);\n    if (mapRef.current) {\n      const projection = mapRef.current.getProjection();\n      if (projection) {\n        const worldCoordinateCenter = projection.fromLatLngToPoint(defaultCenter);\n        const pixelOffset = new window.google.maps.Point(position.x / newScale + worldCoordinateCenter.x, position.y / newScale + worldCoordinateCenter.y);\n        const newImageLatLng = projection.fromPointToLatLng(pixelOffset);\n        setImageLatLng({\n          lat: newImageLatLng.lat(),\n          lng: newImageLatLng.lng()\n        });\n\n        // Update image size when scale changes\n        setImageSize({\n          width: imageSize.width * (1 / scale) * newScale,\n          height: imageSize.height * (1 / scale) * newScale\n        });\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"file\",\n      accept: \"image/*\",\n      onChange: handleFileChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"range\",\n      min: \"0\",\n      max: \"1\",\n      step: \"0.01\",\n      value: opacity,\n      onChange: e => setOpacity(e.target.value)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"Opacity: \", opacity]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"range\",\n      min: \"0.1\",\n      max: \"2\",\n      step: \"0.01\",\n      value: scale,\n      onChange: handleScaleChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"Scale: \", scale]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"Position: (\", position.x, \", \", position.y, \") | Size: (\", imageSize.width, \"px, \", imageSize.height, \"px)\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"Image Coordinates: (\", imageLatLng.lat, \", \", imageLatLng.lng, \")\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(LoadScript, {\n      googleMapsApiKey: \"AIzaSyA3bsDl1xddiU_w38hA-fsGea8kWsp5uJM\",\n      children: /*#__PURE__*/_jsxDEV(GoogleMap, {\n        mapContainerStyle: containerStyle,\n        center: defaultCenter,\n        zoom: 10,\n        onLoad: handleLoad,\n        children: image && /*#__PURE__*/_jsxDEV(Draggable, {\n          onDrag: handleDrag,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              position: 'absolute',\n              top: position.y,\n              left: position.x,\n              opacity: opacity,\n              transform: `scale(${scale})`,\n              transformOrigin: 'top left',\n              zIndex: 1000\n            },\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: image,\n              alt: \"overlay\",\n              style: {\n                width: imageSize.width,\n                height: imageSize.height\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 117,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 5\n  }, this);\n}\n_s(MapComponent, \"LPiI2O0LWlfr04UGYkFtwm/qME4=\");\n_c = MapComponent;\nexport default MapComponent;\nvar _c;\n$RefreshReg$(_c, \"MapComponent\");","map":{"version":3,"names":["React","useRef","useState","GoogleMap","LoadScript","Draggable","containerStyle","width","height","defaultCenter","lat","lng","MapComponent","mapRef","image","setImage","opacity","setOpacity","scale","setScale","position","setPosition","x","y","imageLatLng","setImageLatLng","imageSize","setImageSize","handleFileChange","e","file","target","files","reader","FileReader","onload","event","img","Image","src","result","readAsDataURL","handleDrag","data","handleLoad","map","current","handleScaleChange","newScale","parseFloat","value","projection","getProjection","worldCoordinateCenter","fromLatLngToPoint","pixelOffset","window","google","maps","Point","newImageLatLng","fromPointToLatLng","top","left","transform","transformOrigin","zIndex"],"sources":["E:/LÃ m tiktok/google-places-api-demo-type/src/components/Map.js"],"sourcesContent":["import React, { useRef, useState } from 'react';\r\nimport { GoogleMap, LoadScript } from '@react-google-maps/api';\r\nimport Draggable from 'react-draggable';\r\n\r\nconst containerStyle = {\r\n  width: '100%',\r\n  height: '600px'\r\n};\r\n\r\nconst defaultCenter = {\r\n  lat: 10.8231,\r\n  lng: 106.6297\r\n};\r\n\r\nfunction MapComponent() {\r\n  const mapRef = useRef(null);\r\n  const [image, setImage] = useState(null);\r\n  const [opacity, setOpacity] = useState(1);\r\n  const [scale, setScale] = useState(1);\r\n  const [position, setPosition] = useState({ x: 0, y: 0 });\r\n  const [imageLatLng, setImageLatLng] = useState(defaultCenter);\r\n  const [imageSize, setImageSize] = useState({ width: 0, height: 0 });\r\n\r\n  const handleFileChange = (e) => {\r\n    const file = e.target.files[0];\r\n    const reader = new FileReader();\r\n    reader.onload = (event) => {\r\n      const img = new Image();\r\n      img.onload = () => {\r\n        setImageSize({ width: img.width, height: img.height });\r\n      };\r\n      img.src = event.target.result;\r\n      setImage(event.target.result);\r\n    };\r\n    reader.readAsDataURL(file);\r\n  };\r\n\r\n  const handleDrag = (e, data) => {\r\n    setPosition({ x: data.x, y: data.y });\r\n  };\r\n\r\n  const handleLoad = (map) => {\r\n    mapRef.current = map;\r\n  };\r\n\r\n  const handleScaleChange = (e) => {\r\n    const newScale = parseFloat(e.target.value);\r\n    setScale(newScale);\r\n    if (mapRef.current) {\r\n      const projection = mapRef.current.getProjection();\r\n      if (projection) {\r\n        const worldCoordinateCenter = projection.fromLatLngToPoint(defaultCenter);\r\n        const pixelOffset = new window.google.maps.Point(\r\n          (position.x / newScale) + worldCoordinateCenter.x,\r\n          (position.y / newScale) + worldCoordinateCenter.y\r\n        );\r\n        const newImageLatLng = projection.fromPointToLatLng(pixelOffset);\r\n        setImageLatLng({ lat: newImageLatLng.lat(), lng: newImageLatLng.lng() });\r\n\r\n        // Update image size when scale changes\r\n        setImageSize({\r\n          width: imageSize.width * (1 / scale) * newScale,\r\n          height: imageSize.height * (1 / scale) * newScale\r\n        });\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <input type=\"file\" accept=\"image/*\" onChange={handleFileChange} />\r\n      <br />\r\n      <input\r\n        type=\"range\"\r\n        min=\"0\"\r\n        max=\"1\"\r\n        step=\"0.01\"\r\n        value={opacity}\r\n        onChange={(e) => setOpacity(e.target.value)}\r\n      />\r\n      <p>Opacity: {opacity}</p>\r\n      <input\r\n        type=\"range\"\r\n        min=\"0.1\"\r\n        max=\"2\"\r\n        step=\"0.01\"\r\n        value={scale}\r\n        onChange={handleScaleChange}\r\n      />\r\n      <p>Scale: {scale}</p>\r\n      <p>\r\n        Position: ({position.x}, {position.y}) | Size: ({imageSize.width}px, {imageSize.height}px)\r\n      </p>\r\n      <p>\r\n        Image Coordinates: ({imageLatLng.lat}, {imageLatLng.lng})\r\n      </p>\r\n      <LoadScript googleMapsApiKey=\"AIzaSyA3bsDl1xddiU_w38hA-fsGea8kWsp5uJM\">\r\n        <GoogleMap\r\n          mapContainerStyle={containerStyle}\r\n          center={defaultCenter}\r\n          zoom={10}\r\n          onLoad={handleLoad}\r\n        >\r\n          {image && (\r\n            <Draggable onDrag={handleDrag}>\r\n              <div\r\n                style={{\r\n                  position: 'absolute',\r\n                  top: position.y,\r\n                  left: position.x,\r\n                  opacity: opacity,\r\n                  transform: `scale(${scale})`,\r\n                  transformOrigin: 'top left',\r\n                  zIndex: 1000\r\n                }}\r\n              >\r\n                <img src={image} alt=\"overlay\" style={{ width: imageSize.width, height: imageSize.height }} />\r\n              </div>\r\n            </Draggable>\r\n          )}\r\n        </GoogleMap>\r\n      </LoadScript>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default MapComponent;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}